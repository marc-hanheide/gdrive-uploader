services:
  drive-uploader:
    build: .
    volumes:
      # Mount your credentials file
      - ./credentials.json:/app/credentials.json
      # Mount the token file (created after first auth)
      - ./token.pickle:/app/token.pickle
      # Mount the directory you want to upload
      - ./uploads:/app/uploads
    environment:
      - UPLOAD_DIR=${GD_UPLOADER_UPLOAD_DIR:-/app/uploads}
      - DRIVE_FOLDER_ID=${GD_UPLOADER_DRIVE_FOLDER_ID:-}    # Optional: add your Google Drive folder ID here
      - FILE_PATTERN=${GD_UPLOADER_FILE_PATTERN:-*}      # Change to *.pdf, *.jpg, etc. if needed
      - CHECK_MD5=${GD_UPLOADER_CHECK_MD5:-true}      # Compare file contents (true/false)
      - FORCE_UPLOAD=${GD_UPLOADER_FORCE_UPLOAD:-false}  # Upload even if file exists (true/false)
      - MANUAL_AUTH=${GD_UPLOADER_MANUAL_AUTH:-true}    # Set to true for manual auth flow
      - DAEMON_MODE=${GD_UPLOADER_DAEMON_MODE:-false}
      - CHECK_INTERVAL=${GD_UPLOADER_CHECK_INTERVAL:-300}